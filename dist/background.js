(()=>{function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function r(){if(!document.querySelector("#productTitle"))return!1;if(!document.querySelector(".priceToPay span.a-offscreen, #priceblock_ourprice, #priceblock_dealprice, .a-price .a-offscreen"))return!1;var r,t=function(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,t){if(r){if("string"==typeof r)return e(r,t);var n={}.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){n=n.call(r)},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw a}}}}(document.querySelectorAll(".a-box-inner h4, .a-alert-heading"));try{for(t.s();!(r=t.n()).done;){var n=r.value.textContent.toLowerCase();if(n.includes("page not found")||n.includes("not available")||n.includes("not exist")||n.includes("no longer available"))return!1}}catch(e){t.e(e)}finally{t.f()}return!0}function t(){for(var e=0,r=[".priceToPay span.a-offscreen","#priceblock_ourprice","#priceblock_dealprice",".a-price .a-offscreen",'.a-price span[aria-hidden="true"]',"#price_inside_buybox","#newBuyBoxPrice","#price"];e<r.length;e++){var t=r[e],n=document.querySelector(t);if(n){var o=n.textContent.trim(),i=parseFloat(o.replace(/[^0-9,\.]/g,"").replace(",","."));if(!isNaN(i))return i}}return null}chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch((function(e){return console.error(e)})),chrome.runtime.onMessage.addListener((function(e,n,o){if("PRODUCT_DATA"===e.type)chrome.runtime.sendMessage({type:"UPDATE_PRODUCT_INFO",data:e.data});else{if("CHECK_PRODUCT_AVAILABILITY"===e.type)return chrome.tabs.create({url:e.url,active:!1},(function(e){chrome.scripting.executeScript({target:{tabId:e.id},function:r},(function(r){chrome.tabs.remove(e.id),r&&r[0]?o({available:r[0].result}):o({available:!1})}))})),!0;if("FETCH_PRICE"===e.type)return chrome.tabs.create({url:e.url,active:!1},(function(e){chrome.scripting.executeScript({target:{tabId:e.id},function:t},(function(r){chrome.tabs.remove(e.id),r&&r[0]&&r[0].result?o({price:r[0].result}):o({price:null})}))})),!0}}))})();